<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RUSKY — Коммуникационный спутник CLAY-COM</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Abhaya+Libre:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Стили для бейджа корзины */
        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ff4444;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        .cart-icon {
            position: relative;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-logo" onclick="location.href='index.html'" style="cursor:pointer">RUSKY</div>
        <nav class="header-nav">
            <a href="index.html">ГЛАВНАЯ</a>
            <a href="#" onclick="openFilterModal()">ФИЛЬТР</a>
            <a href="equipment.html">ОБОРУДОВАНИЕ</a>
            <a href="satellites.html">СПУТНИКИ</a>
            <a href="#" onclick="openDocumentationModal()">ДОКУМЕНТАЦИЯ</a>
            <a href="request.html">ЗАПРОС</a>
            <a href="support.html">ПОДДЕРЖКА</a>
            <a href="orders.html">МОИ ЗАКАЗЫ</a>
            <a href="about.html">О НАС</a>
        </nav>
        <div class="burger-menu" onclick="toggleMobileMenu()">
            <div class="burger-line"></div>
            <div class="burger-line"></div>
            <div class="burger-line"></div>
        </div>
        <a href="cart.html" class="cart-icon" aria-label="Корзина">
            <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="10" cy="26" r="3" fill="white"/>
                <circle cx="24" cy="26" r="3" fill="white"/>
                <path d="M4 7H7L10 20H25L28 11H9" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
            </svg>
            <span class="cart-badge" style="display: none;">0</span>
        </a>
    </header>

    <nav class="mobile-nav">
        <div class="mobile-nav-list">
            <a href="index.html">ГЛАВНАЯ</a>
            <a href="#" onclick="openFilterModal()">ФИЛЬТР</a>
            <a href="equipment.html">ОБОРУДОВАНИЕ</a>
            <a href="satellites.html">СПУТНИКИ</a>
            <a href="#" onclick="openDocumentationModal()">ДОКУМЕНТАЦИЯ</a>
            <a href="launch-process.html">ПРОЦЕСС ЗАПУСКА</a>
            <a href="launch-help.html">ПОМОЩЬ С ЗАПУСКОМ</a>
            <a href="support.html">ПОДДЕРЖКА</a>
            <a href="orders.html">МОИ ЗАКАЗЫ</a>
            <a href="about.html">О НАС</a>
            <a href="cart.html" class="mobile-cart-link" aria-label="Корзина">
                <svg width="24" height="24" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="10" cy="26" r="3" fill="white"/>
                    <circle cx="24" cy="26" r="3" fill="white"/>
                    <path d="M4 7H7L10 20H25L28 11H9" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                </svg>
                КОРЗИНА
            </a>
        </div>
    </nav>

    <main class="product-page">
        <div class="product-container">
            <aside class="product-gallery">
                <div class="product-main-image">
                    <img src="wmremove-transformed-5.png" alt="CLAY-COM" loading="eager">
                </div>
                <div class="product-thumbs">
                    <img src="wmremove-transformed-5.png" alt="thumb 1">
                    <img src="wmremove-transformed-4.png" alt="thumb 2">
                    <img src="card 2.png" alt="thumb 3">
                    <img src="img 4.png" alt="thumb 4">
                </div>
            </aside>

            <section class="product-info">
                <h1 class="product-title">Коммуникационный спутник<br>CLAY-COM</h1>
                
                <!-- Индикаторы наличия и цены -->
                <div class="product-indicators" style="margin: 20px 0 30px 0;">
                    <div class="availability-indicator" style="display: inline-block; background: rgba(220, 53, 69, 0.1); color: #dc3545; padding: 4px 12px; border-radius: 20px; font-size: 14px; font-weight: 600; margin-right: 15px; border: 1px solid #dc3545; text-transform: uppercase; letter-spacing: 0.5px;">
                        Нет в наличии
                    </div>
                    <div class="price-indicator" style="display: inline-block; background: rgba(0, 123, 255, 0.1); color: #007bff; padding: 4px 12px; border-radius: 20px; font-size: 14px; font-weight: 600; border: 1px solid #007bff; text-transform: uppercase; letter-spacing: 0.5px;">
                        Цена по запросу
                    </div>
                </div>
                
                <p class="product-lead">
                    Предназначен для организации широкополосной связи в труднодоступных и удалённых регионах (горные районы, острова, сельская местность), а также в условиях чрезвычайных ситуаций.
                </p>

                <div class="product-specs">
                    <h3>Ключевые характеристики:</h3>
                    <p><strong>Диапазоны:</strong> Поддержка Ku- и Ka-диапазонов (высокая пропускная способность)</p>
                    <p><strong>Орбиты:</strong> Возможна работа как на GEO (геостационарной), так и на LEO (низкой) орбите</p>
                    <p><strong>Пропускная способность:</strong> до 1 Гбит/с</p>
                    <p><strong>Покрытие:</strong> динамически управляемая зона покрытия до 2000 км в диаметре</p>
                    <p><strong>Наземная инфраструктура:</strong> совместим с VSAT-станциями и портативными терминалами</p>
                </div>

                <div class="product-advantages">
                    <h3>Преимущества:</h3>
                    <p>Быстрое развертывание связи в регионах без инфраструктуры</p>
                    <p>Подходит для военных, правительственных и коммерческих проектов</p>
                    <p>Поддержка защищённой связи (опционально)</p>
                </div>

                <div class="product-actions">
                    <button class="btn btn-outline" id="requestPriceBtnClaycom">ЗАПРОСИТЬ ЦЕНУ</button>
                    <button class="btn btn-outline btn-add-cart" id="addToCartBtnClaycom" data-add-to-cart>ДОБАВИТЬ В КОРЗИНУ</button>
                </div>

                <div class="product-side-label">CLAY-CUBE</div>
            </section>
        </div>
    </main>

    <script src="main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Обновляем бейдж корзины при загрузке страницы
            updateCartBadgeOnPage();

            // Кнопка "Запросить цену"
            const requestPriceBtn = document.getElementById('requestPriceBtnClaycom');
            if (requestPriceBtn) {
                requestPriceBtn.addEventListener('click', function() {
                    window.location.href = 'request.html';
                });
            }

            // Кнопка "Добавить в корзину"
            const addToCartBtn = document.getElementById('addToCartBtnClaycom');
            if (addToCartBtn) {
                addToCartBtn.addEventListener('click', function() {
                    // Данные товара
                    const productId = 'clay-com-satellite-detail';
                    const productName = 'Коммуникационный спутник CLAY-COM';
                    const productPrice = 0; // Цена по запросу для спутников
                    const productImage = 'wmremove-transformed-5.png';
                    const productType = 'satellite';

                    // Добавляем товар в корзину
                    if (typeof addToCart === 'function') {
                        addToCart(productId, productName, productPrice, productImage, productType);
                        updateCartBadgeOnPage(); // Обновляем бейдж
                    } else {
                        console.error('Функция addToCart не найдена');
                        // Запасной вариант - прямо в localStorage
                        try {
                            const cart = JSON.parse(localStorage.getItem('rusky_cart') || '[]');
                            const existingItem = cart.find(item => item.id === productId);
                            
                            if (existingItem) {
                                existingItem.qty = (existingItem.qty || 1) + 1;
                            } else {
                                cart.push({
                                    id: productId,
                                    name: productName,
                                    price: productPrice,
                                    image: productImage,
                                    type: productType,
                                    qty: 1
                                });
                            }
                            
                            localStorage.setItem('rusky_cart', JSON.stringify(cart));
                            updateCartBadgeOnPage(); // Обновляем бейдж
                            
                            // Показываем уведомление
                            alert('Товар добавлен в корзину!');
                        } catch (e) {
                            console.error('Ошибка при добавлении товара в корзину:', e);
                            alert('Произошла ошибка при добавлении товара в корзину');
                        }
                    }
                });
            }
        });

        // Функция для обновления бейджа корзины на текущей странице
        function updateCartBadgeOnPage() {
            try {
                const cart = JSON.parse(localStorage.getItem('rusky_cart') || '[]');
                const totalQty = cart.reduce((sum, item) => sum + (item.qty || 1), 0);
                const badge = document.querySelector('.cart-badge');
                
                if (badge) {
                    if (totalQty > 0) {
                        badge.style.display = 'flex';
                        badge.textContent = totalQty;
                    } else {
                        badge.style.display = 'none';
                    }
                }
            } catch (e) {
                console.error('Ошибка при обновлении бейджа корзины:', e);
            }
        }
    </script>
</body>
</html>
